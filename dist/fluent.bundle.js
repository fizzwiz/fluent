!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.fluent=e():t.fluent=e()}(self,(()=>(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{core:()=>o});class r{what(...t){throw"abstract method!"}let(t,...e){throw"abstract method!"}static as(t){if(t instanceof r)return t;if("function"==typeof t){const e=new r;return e.what=t,e}return r.as((e=>e===t))}toFunc(){return(...t)=>this.what(...t)}static of(t,...e){const o=new r;return o.what=(...r)=>n.equal(r,e)?t:void 0,o}if(t=(t=>void 0!==t)){return r.if(this,t)}which(t=(t=>void 0!==t)){return r.which(this,t)}when(t,e=!0,n=e){return r.when(this,t,e,n)}then(t){return r.then(this,t)}else(t){return r.else(this,t)}match(t){return r.match(this,t)}each(t){const e=new r;return e.what=(...e)=>{const o=new n,i=n.as(this.what(...e)).which().toArray();return o[Symbol.iterator]=function*(){for(let e of i)for(let o of n.as(r.what(t,e)).which())yield o},o},e}self(t=void 0,e=void 0){return r.self(this,t,e)}}r.if=function(t,e=(t=>void 0!==t)){return r.as((n=>r.what(e,n)?r.what(t,n):void 0))},r.which=function(t,e=(t=>void 0!==t)){return r.as((o=>n.as(r.what(t,o)).which(e.bind(void 0,o))))},r.when=function(t,e,o=!0,i=o){const a="number"==typeof e;return r.as((f=>n.as(r.what(t,f)).when(a?e:r.as(e).toFunc().bind(void 0,f),o,i)))},r.then=function(...t){return r.as((e=>{let n=e;for(let e of t)if(n=r.what(e,n),void 0===n)break;return n}))},r.else=function(...t){return r.as((e=>{let n;for(let o of t)if(n=r.what(o,e),void 0!==n)break;return n}))},r.what=function(t,...e){return t instanceof r?t.what(...e):"function"==typeof t?t(...e):t},r.match=function(...t){return r.as((e=>t.map((t=>r.what(t,e)))))},r.each=function(...t){return r.as((e=>e.length>t.length?n.of():e.across(n.as(r.what(t[e.length-1],e.last))).which()))},r.self=function(t,e=void 0,o=void 0){let i=e=>e.across(n.as(r.what(t,e.last)).which());return void 0!==e?i=i=>{const a=n.as("string"==typeof e?[e]:e).then((t=>"string"==typeof t?i[t]:t)),f=r.what("string"==typeof t?i[t]:t,...a);return void 0===f?void 0:void 0!==o?(i[o]=f,i):f}:void 0!==o&&(i=(...e)=>{let n=r.what(t,...e);if(void 0!==n){const t={};return t[o]=n,t}}),r.as(i)};class n{[Symbol.iterator](){throw"abstract method!"}toArray(){return Array.from(this)}static as(t){if(void 0===t)return n.of();if(t instanceof n)return t;if(t[Symbol.iterator]){const e=new n;return e[Symbol.iterator]=t[Symbol.iterator].bind(t),e}return n.of(t)}static of(...t){return n.as(t)}equals(t){return n.equal(this,t)}if(t=(t=>null!=t)){return n.if(this,t)}which(t=(t=>null!=t)){return n.which(this,t)}then(t){return n.then(this,t)}else(t){return n.else(this,n.as(t))}match(t){return n.match(this,n.as(t))}each(t){const e=this,r=new n;return r[Symbol.iterator]=function*(){for(let r of e)for(let e of n.as(t))yield[r,e]},r}when(t,e=!0,r=e){return n.when(this,t,e,r)}self(){return n.self(this)}what(t=void 0,e=void 0){return n.what(this,t,e)}}n.equal=function(t,e){if("string"==typeof t||!n.isIterable(t)||"string"==typeof e||!n.isIterable(e))return t===e;{const r=t[Symbol.iterator](),o=e[Symbol.iterator]();for(;;){const t=r.next(),e=o.next();if(t.done||e.done)return t.done===e.done;if(!n.equal(t.value,e.value))return!1}}},n.isIterable=function(t){return null!=t&&t[Symbol.iterator]},n.NATURAL=new n,n.NATURAL[Symbol.iterator]=function*(){let t=0;for(;;)yield t++},n.if=function(t,e=(t=>void 0!==t)){return n.which(t,e)},n.which=function(t,e=(t=>void 0!==t)){const o=new n;return o[Symbol.iterator]=function*(){for(let n of t)r.what(e,n)&&(yield n)},o},n.self=function(t){const e=new n;return e[Symbol.iterator]=function*(){for(;;)yield t},e},n.then=function(t,e){const o=new n;return o[Symbol.iterator]=function*(){let n=0;for(let o of t)yield r.what(e,o,n++)},o},n.else=function(...t){const e=new n;return e[Symbol.iterator]=function*(){for(let e of t)if(e[Symbol.iterator])for(let t of n.else(...e))yield t;else yield e},e},n.match=function(...t){const e=new n;return e[Symbol.iterator]=function*(){const e=t.map((t=>t[Symbol.iterator]?t:n.of(t))).map((t=>t[Symbol.iterator]()));for(;;){const t=e.map((t=>t.next()));if(t.every((t=>t.done)))break;yield t.map((t=>t.value))}},e},n.each=function(...t){return t=t.map((t=>t[Symbol.iterator]?t:[t])),r.as((e=>e.length<t.length?e.across(t[e.length]):n.of()))},n.when=function(t,e,o=!0,i=o){if("number"==typeof e){const t=e;e=(e,r)=>r===t}const a=new n;return a[Symbol.iterator]=o?function*(){let n=0,o=!1;for(let a of t)o?yield a:r.what(e,a,n)&&(o=!0,i&&(yield a)),n++}:function*(){let n=0,o=!1;for(let a of t){if(o)break;r.what(e,a,n)?(o=!0,i&&(yield a)):yield a,n++}},a},n.what=function(t,e,o){if(e){void 0===o&&(o=n.what(t),t=n.when(t,1));for(let n of t)o=r.what(e,o,n);return o}for(let e of t)return e};const o={Each:n,What:r};return e})()));